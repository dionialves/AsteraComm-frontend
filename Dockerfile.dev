FROM node:18-alpine

WORKDIR /app

# Instala dependências na primeira execução
# O volume sobrescreve /app, então precisamos reinstalar se necessário
COPY package*.json ./

EXPOSE 4321

# Script que verifica node_modules e inicia o dev server
CMD ["sh", "-c", "npm install && npm run dev -- --host 0.0.0.0"]
